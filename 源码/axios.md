设计思路：

### 1、单例

通过createInstance创建并export一个实例对象，从而实现让import都导入同一个实例

### 2、实例其实是一个函数

返回的实例实际上是一个函数，这样就可以让实例可以直接调用，即axios()

### 3、利用函数是对象的特点

在返回的实例（函数）上添加拓展的属性、方法

### 4、拦截器的设计

拦截器分为两部分：请求拦截和响应拦截。

据此可将整个流程分为：请求拦截，发送请求，响应拦截，其余响应操作。

另，由于请求拦截和响应拦截只是语义上不同，因此可用相同的数据结构存储`InterceptorManager`

由于请求拦截和响应拦截往往不止一个，因此用`handlers`数组来存储这些拦截。

即，一个axios实例对应两个`InterceptorManager`（请求和响应），每个`InterceptorManager`内有一个`handlers`数组，存储多个拦截器

既然用数组来存储拦截器，那么就需要提供新增、删除拦截器的方法，新增简单，就是push，那么如何删除呢？

**push后返回一个id（可为数组下标），删除时通过这个id去删除**（有点类似定时器`setTimeout` 和 `setInterval`）

（删除可直接赋值为null）

#### 拦截器的使用：

**设置一个数组chain放置发送请求的核心方法，然后将请求拦截头插到数组头部，响应拦截尾插到数组尾部**

然后遍历数组，组成promise链